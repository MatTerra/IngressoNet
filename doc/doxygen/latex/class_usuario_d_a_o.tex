\hypertarget{class_usuario_d_a_o}{}\doxysection{Referência da Classe Usuario\+D\+AO}
\label{class_usuario_d_a_o}\index{UsuarioDAO@{UsuarioDAO}}


{\ttfamily \#include $<$usuariodao.\+h$>$}

Diagrama de hierarquia para Usuario\+D\+AO\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_usuario_d_a_o}
\end{center}
\end{figure}
\doxysubsection*{Membros Públicos}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{class_usuario_d_a_o_ae964b5a8a67e1e794a3562503cdabf52}{$\sim$\+Usuario\+D\+AO}} ()
\item 
\mbox{\hyperlink{class_usuario}{Usuario}} \mbox{\hyperlink{class_usuario_d_a_o_afdc11cb9ab3a6b516ac0e0a499755f5f}{get}} (std\+::string) override
\item 
std\+::vector$<$ \mbox{\hyperlink{class_usuario}{Usuario}} $>$ \mbox{\hyperlink{class_usuario_d_a_o_a7f2913deec72b3c1c102f032592cf520}{get\+All}} () override
\item 
void \mbox{\hyperlink{class_usuario_d_a_o_ab22491952d7f7606bcb3c4361207bdec}{save}} (\mbox{\hyperlink{class_usuario}{Usuario}}) override
\item 
void \mbox{\hyperlink{class_usuario_d_a_o_aad6d80f3d9868197a019878e69c39376}{update}} (\mbox{\hyperlink{class_usuario}{Usuario}}, std\+::string\mbox{[}$\,$\mbox{]}) override
\item 
void \mbox{\hyperlink{class_usuario_d_a_o_af929fbadb5e4bc01ba61e61594d848fe}{remove}} (\mbox{\hyperlink{class_usuario}{Usuario}}) override
\end{DoxyCompactItemize}
\doxysubsection*{Membros Públicos Estáticos}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_usuario_d_a_o}{Usuario\+D\+AO}} $\ast$ \mbox{\hyperlink{class_usuario_d_a_o_abc620ee830afa8c0c91a4b725bb3fefd}{get\+Instance}} ()
\end{DoxyCompactItemize}


\doxysubsection{Construtores e Destrutores}
\mbox{\Hypertarget{class_usuario_d_a_o_ae964b5a8a67e1e794a3562503cdabf52}\label{class_usuario_d_a_o_ae964b5a8a67e1e794a3562503cdabf52}} 
\index{UsuarioDAO@{UsuarioDAO}!````~UsuarioDAO@{$\sim$UsuarioDAO}}
\index{````~UsuarioDAO@{$\sim$UsuarioDAO}!UsuarioDAO@{UsuarioDAO}}
\doxysubsubsection{\texorpdfstring{$\sim$UsuarioDAO()}{~UsuarioDAO()}}
{\footnotesize\ttfamily Usuario\+D\+A\+O\+::$\sim$\+Usuario\+D\+AO (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Default destructor 
\begin{DoxyCode}{0}
\DoxyCodeLine{6                        \{}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \}}

\end{DoxyCode}


\doxysubsection{Funções membros}
\mbox{\Hypertarget{class_usuario_d_a_o_afdc11cb9ab3a6b516ac0e0a499755f5f}\label{class_usuario_d_a_o_afdc11cb9ab3a6b516ac0e0a499755f5f}} 
\index{UsuarioDAO@{UsuarioDAO}!get@{get}}
\index{get@{get}!UsuarioDAO@{UsuarioDAO}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_usuario}{Usuario}} Usuario\+D\+A\+O\+::get (\begin{DoxyParamCaption}\item[{std\+::string}]{cpf }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Get an user instance from database 
\begin{DoxyParams}{Parâmetros}
{\em cpf} & to look for in db \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
user with cpf 
\end{DoxyReturn}


Implementa \mbox{\hyperlink{class_generic_d_a_o_aeb53ae6b7068ae2dd94bbbfb507d887d}{Generic\+D\+A\+O$<$ Usuario $>$}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{10                                     \{}
\DoxyCodeLine{11   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{12     std::string query = \textcolor{stringliteral}{"SELECT a.senha, b.numero, b.codigoDeSeguranca FROM usuario\_t a, cartao\_t b WHERE a.cpf = b.cpf AND a.cpf = '"}+cpf+\textcolor{stringliteral}{"';"};}
\DoxyCodeLine{13     MYSQL\_RES* res = mysqlHelper-\/>\mbox{\hyperlink{class_my_s_q_l_helper_a08a4372347d7c5dda23c4d24e17c2474}{query}}(query);}
\DoxyCodeLine{14 }
\DoxyCodeLine{15     MYSQL\_ROW row;}
\DoxyCodeLine{16     \textcolor{keywordflow}{if}((row= mysql\_fetch\_row(res))) \{}
\DoxyCodeLine{17       std::string senha = row[0];}
\DoxyCodeLine{18       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} numeroCartao = strtoul(row[1], \textcolor{keyword}{nullptr}, 10);}
\DoxyCodeLine{19       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} numSeguranca = atoi(row[2]);}
\DoxyCodeLine{20 }
\DoxyCodeLine{21       \mbox{\hyperlink{class_cartao}{Cartao}} card(numeroCartao, numSeguranca);}
\DoxyCodeLine{22       \mbox{\hyperlink{class_usuario}{Usuario}} user(cpf, senha, card);}
\DoxyCodeLine{23 }
\DoxyCodeLine{24       mysql\_free\_result(res);}
\DoxyCodeLine{25       \textcolor{keywordflow}{return} user;}
\DoxyCodeLine{26     \}}
\DoxyCodeLine{27     \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{28       \mbox{\hyperlink{class_cartao}{Cartao}} card(0, 0);}
\DoxyCodeLine{29       \mbox{\hyperlink{class_usuario}{Usuario}} user(\textcolor{stringliteral}{"000.000.000-\/00"}, \textcolor{stringliteral}{"0"}, card);}
\DoxyCodeLine{30       \textcolor{keywordflow}{return} user;}
\DoxyCodeLine{31     \}}
\DoxyCodeLine{32   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_not_able_to_connect_exception}{NotAbleToConnectException}}\& e) \{}
\DoxyCodeLine{33     \textcolor{keywordflow}{throw} e;}
\DoxyCodeLine{34   \}}
\DoxyCodeLine{35 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_usuario_d_a_o_a7f2913deec72b3c1c102f032592cf520}\label{class_usuario_d_a_o_a7f2913deec72b3c1c102f032592cf520}} 
\index{UsuarioDAO@{UsuarioDAO}!getAll@{getAll}}
\index{getAll@{getAll}!UsuarioDAO@{UsuarioDAO}}
\doxysubsubsection{\texorpdfstring{getAll()}{getAll()}}
{\footnotesize\ttfamily std\+::vector$<$ \mbox{\hyperlink{class_usuario}{Usuario}} $>$ Usuario\+D\+A\+O\+::get\+All (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Get all users in database \begin{DoxyReturn}{Retorna}
usuarios vector of users in database 
\end{DoxyReturn}


Implementa \mbox{\hyperlink{class_generic_d_a_o_a9b2932c1763d2fa25ee7ce5838b46b70}{Generic\+D\+A\+O$<$ Usuario $>$}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{37                                      \{}
\DoxyCodeLine{38   std::vector<Usuario> usuarios;}
\DoxyCodeLine{39   \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{40     std::string query = \textcolor{stringliteral}{"SELECT a.cpf, a.senha, b.numero, b.codigoDeSeguranca FROM usuario\_t a, cartao\_t b WHERE a.cpf = b.cpf;"};}
\DoxyCodeLine{41     MYSQL\_RES* res = mysqlHelper-\/>\mbox{\hyperlink{class_my_s_q_l_helper_a08a4372347d7c5dda23c4d24e17c2474}{query}}(query);}
\DoxyCodeLine{42     MYSQL\_ROW row = mysql\_fetch\_row(res);}
\DoxyCodeLine{43 }
\DoxyCodeLine{44     \textcolor{keywordflow}{do}\{}
\DoxyCodeLine{45         std::string cpf = row[0];}
\DoxyCodeLine{46         std::string senha = row[1];}
\DoxyCodeLine{47         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} numeroCartao = strtoul(row[2], \textcolor{keyword}{nullptr}, 10);}
\DoxyCodeLine{48         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} numSeguranca = atoi(row[3]);}
\DoxyCodeLine{49 }
\DoxyCodeLine{50         \mbox{\hyperlink{class_cartao}{Cartao}} card(numeroCartao, numSeguranca);}
\DoxyCodeLine{51         \mbox{\hyperlink{class_usuario}{Usuario}} user(cpf, senha, card);}
\DoxyCodeLine{52 }
\DoxyCodeLine{53         usuarios.push\_back(user);}
\DoxyCodeLine{54     \}\textcolor{keywordflow}{while}((row = mysql\_fetch\_row(res)));}
\DoxyCodeLine{55     mysql\_free\_result(res);}
\DoxyCodeLine{56     \textcolor{keywordflow}{return} usuarios;}
\DoxyCodeLine{57   \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_not_able_to_connect_exception}{NotAbleToConnectException}}\& e) \{}
\DoxyCodeLine{58     \textcolor{keywordflow}{throw} e;}
\DoxyCodeLine{59   \}}
\DoxyCodeLine{60 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_usuario_d_a_o_abc620ee830afa8c0c91a4b725bb3fefd}\label{class_usuario_d_a_o_abc620ee830afa8c0c91a4b725bb3fefd}} 
\index{UsuarioDAO@{UsuarioDAO}!getInstance@{getInstance}}
\index{getInstance@{getInstance}!UsuarioDAO@{UsuarioDAO}}
\doxysubsubsection{\texorpdfstring{getInstance()}{getInstance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_usuario_d_a_o}{Usuario\+D\+AO}} $\ast$ Usuario\+D\+A\+O\+::get\+Instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{84                                    \{}
\DoxyCodeLine{85   \textcolor{keywordflow}{if}(UsuarioDAO::instance == \textcolor{keyword}{nullptr})\{}
\DoxyCodeLine{86       UsuarioDAO::instance = \textcolor{keyword}{new} \mbox{\hyperlink{class_usuario_d_a_o}{UsuarioDAO}}();}
\DoxyCodeLine{87       \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{88         UsuarioDAO::mysqlHelper = \mbox{\hyperlink{class_my_s_q_l_helper_abc52e99f4fa975cbecdd8fb9375acce2}{MySQLHelper::getInstance}}();}
\DoxyCodeLine{89       \} \textcolor{keywordflow}{catch} (\mbox{\hyperlink{class_not_able_to_connect_exception}{NotAbleToConnectException}}\& e) \{}
\DoxyCodeLine{90         UsuarioDAO::instance = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{91         \textcolor{keywordflow}{throw} e;}
\DoxyCodeLine{92       \}}
\DoxyCodeLine{93   \}}
\DoxyCodeLine{94   \textcolor{keywordflow}{return} UsuarioDAO::instance;}
\DoxyCodeLine{95 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_usuario_d_a_o_af929fbadb5e4bc01ba61e61594d848fe}\label{class_usuario_d_a_o_af929fbadb5e4bc01ba61e61594d848fe}} 
\index{UsuarioDAO@{UsuarioDAO}!remove@{remove}}
\index{remove@{remove}!UsuarioDAO@{UsuarioDAO}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}}
{\footnotesize\ttfamily void Usuario\+D\+A\+O\+::remove (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_usuario}{Usuario}}}]{u }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplementa \mbox{\hyperlink{class_generic_d_a_o_adde736eb66cc9cd6a6fa739e6ee078f8}{Generic\+D\+A\+O$<$ Usuario $>$}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{77                                 \{}
\DoxyCodeLine{78   std::string query = \textcolor{stringliteral}{"DELETE FROM cartao\_t WHERE (cpf = '"}+u.\mbox{\hyperlink{class_usuario_a71708f2f52370f6adfda35fdbed52a64}{getCPF}}()+\textcolor{stringliteral}{"');"};}
\DoxyCodeLine{79   mysql\_free\_result(mysqlHelper-\/>\mbox{\hyperlink{class_my_s_q_l_helper_a08a4372347d7c5dda23c4d24e17c2474}{query}}(query));}
\DoxyCodeLine{80   query = \textcolor{stringliteral}{"DELETE FROM usuario\_t WHERE (cpf = '"}+u.\mbox{\hyperlink{class_usuario_a71708f2f52370f6adfda35fdbed52a64}{getCPF}}()+\textcolor{stringliteral}{"');"};}
\DoxyCodeLine{81   mysql\_free\_result(mysqlHelper-\/>\mbox{\hyperlink{class_my_s_q_l_helper_a08a4372347d7c5dda23c4d24e17c2474}{query}}(query));}
\DoxyCodeLine{82 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_usuario_d_a_o_ab22491952d7f7606bcb3c4361207bdec}\label{class_usuario_d_a_o_ab22491952d7f7606bcb3c4361207bdec}} 
\index{UsuarioDAO@{UsuarioDAO}!save@{save}}
\index{save@{save}!UsuarioDAO@{UsuarioDAO}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void Usuario\+D\+A\+O\+::save (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_usuario}{Usuario}}}]{u }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplementa \mbox{\hyperlink{class_generic_d_a_o_afd0fa95e82db30049b706eec959647bf}{Generic\+D\+A\+O$<$ Usuario $>$}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{61                               \{}
\DoxyCodeLine{62   std::string query = \textcolor{stringliteral}{"INSERT INTO usuario\_t (cpf, senha) VALUES ('"}+u.\mbox{\hyperlink{class_usuario_a71708f2f52370f6adfda35fdbed52a64}{getCPF}}()+\textcolor{stringliteral}{"', '"}+u.\mbox{\hyperlink{class_usuario_a44527899a5f049f8072800b19435d106}{getSenha}}()+\textcolor{stringliteral}{"');"};}
\DoxyCodeLine{63   std::string query2 = \textcolor{stringliteral}{"INSERT INTO cartao\_t (numero, cpf, codigoDeSeguranca) VALUES ("}+std::to\_string(u.\mbox{\hyperlink{class_usuario_acb47fcc6f8bf29e476977374f8415af3}{getCartao}}().\mbox{\hyperlink{class_cartao_ab491b37488f8c01fa9ae7591e5dbfed9}{getNumero}}())+\textcolor{stringliteral}{", '"}+u.\mbox{\hyperlink{class_usuario_a71708f2f52370f6adfda35fdbed52a64}{getCPF}}()+\textcolor{stringliteral}{"', "}+std::to\_string(u.\mbox{\hyperlink{class_usuario_acb47fcc6f8bf29e476977374f8415af3}{getCartao}}().\mbox{\hyperlink{class_cartao_a4734504fba17d2c199707ce68e9f179e}{getNumSeguranca}}())+\textcolor{stringliteral}{");"};}
\DoxyCodeLine{64   mysql\_free\_result(mysqlHelper-\/>\mbox{\hyperlink{class_my_s_q_l_helper_a08a4372347d7c5dda23c4d24e17c2474}{query}}(query));}
\DoxyCodeLine{65   mysql\_free\_result(mysqlHelper-\/>\mbox{\hyperlink{class_my_s_q_l_helper_a08a4372347d7c5dda23c4d24e17c2474}{query}}(query2));}
\DoxyCodeLine{66 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_usuario_d_a_o_aad6d80f3d9868197a019878e69c39376}\label{class_usuario_d_a_o_aad6d80f3d9868197a019878e69c39376}} 
\index{UsuarioDAO@{UsuarioDAO}!update@{update}}
\index{update@{update}!UsuarioDAO@{UsuarioDAO}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Usuario\+D\+A\+O\+::update (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_usuario}{Usuario}}}]{u,  }\item[{std\+::string}]{params\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplementa \mbox{\hyperlink{class_generic_d_a_o_ab9902f58eb402e094f710acb1f605881}{Generic\+D\+A\+O$<$ Usuario $>$}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{67                                                     \{}
\DoxyCodeLine{68   std::string query;}
\DoxyCodeLine{69   \textcolor{keywordflow}{if}(params[0].compare(\textcolor{stringliteral}{"senha"})==0)\{}
\DoxyCodeLine{70     query = \textcolor{stringliteral}{"UPDATE usuario\_t SET senha = '"}+params[1]+\textcolor{stringliteral}{"' WHERE (cpf = '"}+u.\mbox{\hyperlink{class_usuario_a71708f2f52370f6adfda35fdbed52a64}{getCPF}}()+\textcolor{stringliteral}{"');"};}
\DoxyCodeLine{71   \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{72     \textcolor{comment}{// TODO erro propriedade não encontrada}}
\DoxyCodeLine{73     qDebug(\textcolor{stringliteral}{"propriedade não encontrada"});}
\DoxyCodeLine{74   \}}
\DoxyCodeLine{75   mysql\_free\_result(mysqlHelper-\/>\mbox{\hyperlink{class_my_s_q_l_helper_a08a4372347d7c5dda23c4d24e17c2474}{query}}(query));}
\DoxyCodeLine{76 \}}

\end{DoxyCode}


A documentação para essa classe foi gerada a partir dos seguintes arquivos\+:\begin{DoxyCompactItemize}
\item 
/home/mateusberardo/\+Documents/\+T\+P1/\+Trabalho\+Mesmo/\+Ingresso\+Net/src/\mbox{\hyperlink{usuariodao_8h}{usuariodao.\+h}}\item 
/home/mateusberardo/\+Documents/\+T\+P1/\+Trabalho\+Mesmo/\+Ingresso\+Net/src/\mbox{\hyperlink{usuariodao_8cpp}{usuariodao.\+cpp}}\end{DoxyCompactItemize}
